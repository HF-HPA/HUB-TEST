<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hampshire Farms Dashboard</title>
<style>
/* ====== GLOBAL STYLES ====== */
body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
  background: #f4f6f8;
}
header {
  background: #2c3e50;
  color: white;
  padding: 1rem;
  text-align: center;
}
nav {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 10px;
}
nav a {
  color: white;
  margin: 0 10px;
  text-decoration: none;
  font-weight: bold;
}
main {
  padding: 1rem;
}
section {
  margin-bottom: 2rem;
  background: white;
  padding: 1rem;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
h2 {
  margin-top: 0;
  color: #34495e;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 1rem;
}
th, td {
  border: 1px solid #ccc;
  padding: 8px;
  text-align: left;
}
th {
  background: #ecf0f1;
}
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 1rem;
}
.card {
  border: 1px solid #ccc;
  border-radius: 6px;
  padding: 10px;
  background: #fafafa;
}
.card img {
  width: 100%;
  height: auto;
  border-radius: 4px;
}
.search-box {
  margin: 10px 0;
  display: flex;
  justify-content: flex-start;
}
.search-box input {
  width: 100%;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
}
@media (max-width: 600px) {
  nav {
    flex-direction: column;
  }
}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>
<body>
<header>
  <h1>Hampshire Farms Dashboard</h1>
  <nav>
    <a href="#weeks">Order Weeks</a>
    <a href="#breakdown">Order Breakdown</a>
    <a href="#plants">Plant Database</a>
    <a href="#pests">Pest Library</a>
  </nav>
</header>
<main>
  <!-- Order Weeks -->
  <section id="weeks">
    <h2>Order Weeks Schedule</h2>
    <table id="weeks-table">
      <thead>
        <tr><th>Week #</th><th>Date</th><th>Shipping</th><th>Additional</th><th>Status</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- Order Breakdown -->
  <section id="breakdown">
    <h2>Order Breakdown</h2>
    <table id="breakdown-table">
      <thead>
        <tr><th>Week</th><th>Category</th><th>Size</th><th>Plant Name</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- Plant Database -->
  <section id="plants">
    <h2>Plant Database</h2>
    <div class="search-box">
      <input type="text" id="plant-search" placeholder="Search plants by name...">
    </div>
    <table id="plants-table">
      <thead>
        <tr><th>SKU</th><th>Name</th><th>Category</th><th>Size</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- Pest Library -->
  <section id="pests">
    <h2>Pest Library</h2>
    <div class="search-box">
      <input type="text" id="pest-search" placeholder="Search pests by name...">
    </div>
    <div id="pest-cards" class="grid"></div>
  </section>
</main>

<script>
// ====== CSV Loader ======
function loadCSV(file, callback) {
  Papa.parse(file, {
    download: true,
    header: true,
    complete: results => callback(results.data)
  });
}

// ====== Load Order Weeks ======
loadCSV('OrderWeeks.csv', data => {
  const tbody = document.querySelector('#weeks-table tbody');
  data.forEach(row => {
    if(row['Week #']) {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${row['Week #']}</td><td>${row['Week date']}</td><td>${row['Shipping']}</td><td>${row['Additional']}</td><td>${row['Status']}</td>`;
      tbody.appendChild(tr);
    }
  });
});

// ====== Load Order Breakdown ======
loadCSV('OrderBreakdown.csv', data => {
  const tbody = document.querySelector('#breakdown-table tbody');
  data.forEach(row => {
    if(row['Week']) {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${row['Week']}</td><td>${row['Category']}</td><td>${row['Size']}</td><td>${row['Plant Name']}</td>`;
      tbody.appendChild(tr);
    }
  });
});

// ====== Load Plants (SKU + Name) ======
let allPlants = [];
loadCSV('SKU_Name_2026.csv', data => {
  allPlants = data.filter(row => row.SKU && row.Name);
  renderPlants(allPlants);
});

function renderPlants(plants) {
  const tbody = document.querySelector('#plants-table tbody');
  tbody.innerHTML = '';
  plants.forEach(row => {
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${row.SKU}</td><td>${row.Name}</td><td>${row.Category || ''}</td><td>${row.Size || ''}</td>`;
    tbody.appendChild(tr);
  });
}

document.getElementById('plant-search').addEventListener('input', e => {
  const term = e.target.value.toLowerCase();
  const filtered = allPlants.filter(p => p.Name.toLowerCase().includes(term));
  renderPlants(filtered);
});

// ====== Load Pests ======
let allPests = [];
loadCSV('pests.csv', data => {
  allPests = data.filter(p => p.common_name);
  renderPests(allPests);
});

function renderPests(pests) {
  const container = document.getElementById('pest-cards');
  container.innerHTML = '';
  pests.forEach(pest => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <img src="images/${pest.image}" alt="${pest.common_name}">
      <h3>${pest.common_name}</h3>
      <p><strong>Scientific:</strong> ${pest.scientific_name}</p>
      <p>${pest.what_they_look_like}</p>
    `;
    container.appendChild(card);
  });
}

document.getElementById('pest-search').addEventListener('input', e => {
  const term = e.target.value.toLowerCase();
  const filtered = allPests.filter(p => p.common_name.toLowerCase().includes(term));
  renderPests(filtered);
});
</script>
</body>
</html>
